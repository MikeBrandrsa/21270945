---
output:
  md_document:
    variant: markdown_github
---
Financial Econometrics Practical

# Outline

This Readme will outline all the following questions by means of explaining, interpreting and reasoning through all the necessary code and functions, whereafter a simplified output will be reproduced within each respective question folders.

First, I sanitize my working environment and source all the necessary functions that will be incorporated into our analyses.
```{r, include=FALSE}

rm(list = ls())
gc()
library(tidyverse)
list.files('code/', full.names = T, recursive = T) %>% .[grepl('.R', .)] %>% as.list() %>% walk(~source(.))
```

```{r, include=FALSE}
# this is a commented out chunk indicating the process by which the questions folders where produced.

# HTML Texevier:
#Texevier::create_template_html(directory = "/Users/michaelbrand/OneDrive/Documents/UNI/2021/2/Fin.Metrics/Test/21270945/Questions",
 #                         template_name = "Question1"
#)
#Texevier::create_template_html(directory = "/Users/michaelbrand/OneDrive/Documents/UNI/2021/2/Fin.Metrics/Test/21270945/Questions",
#                         template_name = "Question2"
#)
#Texevier::create_template_html(directory = "/Users/michaelbrand/OneDrive/Documents/UNI/2021/2/Fin.Metrics/Test/21270945/Questions",
#                         template_name = "Question3"
#)
#Texevier::create_template_html(directory = "/Users/michaelbrand/OneDrive/Documents/UNI/2021/2/Fin.Metrics/Test/21270945/Questions",
#                          template_name = "Question4"
#)
#Texevier::create_template_html(directory = "/Users/michaelbrand/OneDrive/Documents/UNI/2021/2/Fin.Metrics/Test/21270945/Questions",
#                          template_name = "Question5"
#)
#Texevier::create_template_html(directory = "/Users/michaelbrand/OneDrive/Documents/UNI/2021/2/Fin.Metrics/Test/21270945/Questions",
#                          template_name = "Question6"
#)
```
Now I procceed with the respective questions.

# Question 1: Yield Spread.

Since the beginning of 2020 the current Yield spreads in local mid to longer dated bond yields have been the highest in decades. This is conventionally expressed as the difference in these yields of these instruments in percentage points or basis points.

```{r, include= FALSE}
library(tidyverse)
SA_bonds <- read_rds("data/SA_Bonds.rds")
#BE_Infl <- read_rds("data/BE_Infl.rds")
#bonds_2y <- read_rds("data/bonds_2y.rds")
#bonds_10y <- read_rds("data/bonds_10y.rds")
#usdzar <- read_rds("data/usdzar.rds")
#ZA_Infl <- read_rds("data/ZA_Infl.rds")
#IV <- read_rds("data/IV.rds")

```

```{r, echo=FALSE}
library(tbl2xts)
library(PerformanceAnalytics)

bond_Adj <- 
SA_bonds %>% gather(Bond, Yield, -date) %>% arrange(date) 

bondplot1 <- bond_Adj %>% 
ggplot() + 
geom_line(aes(x = date, y = Yield, color = Bond), alpha = 0.8, 
    size = 1.2)

bondplot1 <- bondplot1 + fmxdat::theme_fmx() + theme(legend.position = "bottom") + labs(x = "date", 
    y = "Yield", title = "Yield of ZAR Bonds.", subtitle = "Using 3 Month, 2 Year and 10 year bond yields.", caption = "Note:\nNico Katzke's data used")

print(bondplot1)

```
we notice several places where rates stagnate and thus check for missing values in the data.
```{r, echo=FALSE, include=FALSE}
is.na(bond_Adj)
sum(is.na(bond_Adj))
```
it appears that all the data is present.

Now at first glance an immediate divergence can be observed between the three bond yields, specifically with the three-month and two-year yields diverging from the longer 10 year bond yield. Before investigating this from an economic and quantitative perspective it is worth investigating it more formally.
```{r}
bond_Adj_yield <- SA_bonds %>%
    arrange(date) %>% 
mutate("10Yr2Yr_spread" = ZA_10Yr - ZA_2Yr,"10Yr3M_spread" = ZA_10Yr - SA_3M,"2Yr3M_spread" = ZA_2Yr - SA_3M ) %>% select(date, "10Yr3M_spread","10Yr2Yr_spread","2Yr3M_spread" )

bond_Adj_yield_tdy <- bond_Adj_yield %>% gather(bondpair, Spread , -date) %>% arrange(date) 

bondplot2 <- bond_Adj_yield_tdy %>% ggplot() + geom_line(aes(x = date, y = Spread, color = bondpair), alpha = 0.8, size = 1.2) 

bondplot2 <- bondplot2 + fmxdat::theme_fmx() + theme(legend.position = "bottom") + labs(x = "date", 
    y = "Yield Spread", title = "Yield Spread of ZAR Bonds.", subtitle = "Using 3 Month, 2 Year and 10 year bond yields.", caption = "Note:\nNico Katzke's data used")

print(bondplot2)
```

```{r}
bond_Adj_yield_tdy2010 <- bond_Adj_yield %>% gather(bondpair, Spread , -date) %>% arrange(date) %>% 
    filter(date > "2010-01-01")

bondplot3 <- bond_Adj_yield_tdy2010 %>% ggplot() + geom_line(aes(x = date, y = Spread, color = bondpair), alpha = 0.8, size = 1.2) 

bondplot3 <- bondplot3 + fmxdat::theme_fmx() + theme(legend.position = "bottom") + labs(x = "date", 
    y = "Yield Spread", title = "Yield Spread of ZAR Bonds.", subtitle = "Using 3 Month, 2 Year and 10 year bond yields.", caption = "Note:\nNico Katzke's data used")

print(bondplot3)
```
\newpage

# Question 2: Portfolio Construction




